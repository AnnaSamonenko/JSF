<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <h3>Table of owners:</h3>
    <h:dataTable id="ownerTable" value="#{buyerBean.findAllBuyers()}" var="i" border="1">

        <h:column>
            <f:facet name="header"> id </f:facet>
            #{i.id}
        </h:column>

        <h:column>
            <f:facet name="header"> Name </f:facet>
            #{i.name}
        </h:column>

        <h:column>
            <f:facet name="header"> Surname </f:facet>
            #{i.surname}
        </h:column>

        <h:column>
            <f:facet name="header"> Address </f:facet>
            #{i.address}
        </h:column>

        <h:column id="stocks">
            <f:facet name="header"> Stocks </f:facet>
            <ui:repeat var="item" value="#{i.shares}"> #{item.id} - #{item.company.companyName}<br/> </ui:repeat>
        </h:column>

        <h:column id="bankAccount">
            <f:facet name="header"> Bank Account </f:facet>
            #{i.bankAccount.moneyOnBankAccount}
        </h:column>
    </h:dataTable>
    <hr/>
    <h3>Add new owners: </h3>
    <h:form id="addNewOwner">
        Name of owner:<h:inputText id="inputOwner" value="#{buyer.name}"/><br/><br/>
        Surname of owner: <h:inputText id="inputSurname" value="#{buyer.surname}"/><br/><br/>
        Address of owner: <h:inputText id="inputAddress" value="#{buyer.address}"/><br/><br/>
        <h:commandButton value="Add" action="#{buyerBean.create(buyer)}">
            <f:ajax execute="addNewOwner" render="ownerTable"/>
        </h:commandButton>
    </h:form>
    <hr/>
    <h3>Update Info about Owner:</h3>
    <h:form id="updateOwner">
        Name: <h:inputText value="#{buyer.name}"/><br/><br/>
        Surname: <h:inputText value="#{buyer.surname}"/><br/><br/>
        Address: <h:inputText value="#{buyer.address}"/><br/><br/>

        ID of buyer: <h:inputText value="#{buyer.id}"/><br/><br/>
        <h:commandButton value="Update" action="#{buyerBean.update(buyer.id, buyer)}">
            <f:ajax execute="updateOwner" render="ownerTable"/>
        </h:commandButton>
    </h:form>
    <hr/>
    <h3>Delete owner:</h3>
    <h:form id="deleteOwner">
        ID: <h:inputText value="#{buyer.id}"/><br/><br/>
        <h:commandButton value="Delete" action="#{buyerBean.delete(buyer.id)}">
            <f:ajax execute="deleteOwner" render="ownerTable"/>
        </h:commandButton>
    </h:form>
    <hr/>
    <h3>Add bank account: </h3>
    <h:form>
        Input id of Buyer, that you want add bank account: <h:inputText value="#{buyer.id}"/><br/><br/>
        <h:commandButton value="Add bank account to buyer" action="#{bankAccountBean.create(buyer.id)}"/>
    </h:form>
    <hr/>
    <h3>Add money on bank account: </h3>
    <h:form>
        Input id of Buyer, that you want to add money: <h:inputText value="#{buyer.id}"/><br/><br/>
        Input amount of money that you want to add: <h:inputText
            value="#{bankAccountBean.operationMoney}"/><br/><br/>
        <h:commandButton value="Add money on account of buyer"
                         action="#{bankAccountBean.addMoney(buyer.id, bankAccountBean.operationMoney)}"/>
    </h:form>
    <hr/>
    <!--Put share on exchange-->
    <h3> Sell share: </h3>
    <h:form>
        Input id of share:<h:inputText value="#{share.id}"/><br/><br/>
        <!--<h:selectOneMenu value="#{shareBean.findAllShares().get(0)}">-->
        <!--<f:selectItems value="#{shareBean.findAllShares()}" var="_sh" itemValue="#{_sh.id}"-->
        <!--itemLabel="#{_sh.id}"/>-->
        <!--</h:selectOneMenu>-->
        <br/>
        Input exchange where you want to put share: <h:inputText value="#{exchange.id}"/><br/><br/>
        <!--<h:selectOneMenu value="#{exchangeBean.findAllExchanges().get(0).name}">-->
            <!--<f:selectItems value="#{exchangeBean.findAllExchanges()}" var="_exchange" itemValue="#{_exchange.id}"-->
                           <!--itemLabel="#{_exchange.name}"/>-->
        <!--</h:selectOneMenu>-->

        <h:commandButton value="Put share on exchange" action="#{exchangeBean.addShare(exchange.id, share.id)}"/>
    </h:form>
    <br/>
    <br/>
</f:view>
</html>
